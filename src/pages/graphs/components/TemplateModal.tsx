import { Divider, Modal, Space, Typography } from 'antd';
import { InfoCircleOutlined } from '@ant-design/icons';
import type { TemplateDto } from '../../../autogenerated';
import JsonView from '@uiw/react-json-view';
import { lightTheme } from '@uiw/react-json-view/light';

const { Title, Text, Paragraph } = Typography;

interface TemplateModalProps {
  template: TemplateDto | null;
  visible: boolean;
  onClose: () => void;
}

export const TemplateModal = ({
  template,
  visible,
  onClose,
}: TemplateModalProps) => {
  if (!template) return null;

  return (
    <Modal
      title={
        <Space>
          <InfoCircleOutlined />
          Template Details
        </Space>
      }
      open={visible}
      onCancel={onClose}
      footer={null}
      width={900}
      styles={{ body: { maxHeight: '80vh', overflowY: 'auto' } }}>
      <Space direction="vertical" size="large" style={{ width: '100%' }}>
        <div>
          <div
            style={{
              display: 'flex',
              alignItems: 'center',
              gap: 12,
              marginBottom: 8,
            }}>
            <Title level={3} style={{ margin: 0 }}>
              {template.name}
            </Title>
            <span
              style={{
                background: '#1890ff',
                color: 'white',
                padding: '2px 8px',
                borderRadius: 4,
                fontSize: 12,
                fontWeight: 500,
              }}>
              {template.kind}
            </span>
          </div>
          <Paragraph style={{ margin: 0, fontSize: 14 }}>
            {template.description}
          </Paragraph>
        </div>

        <div>
          <Title level={4} style={{ marginBottom: 16 }}>
            Schema Definition
          </Title>
          <div style={{}}>
            <div className="json-schema-viewer">
              <JsonView value={template.schema} style={lightTheme} />
            </div>
          </div>
        </div>
      </Space>
    </Modal>
  );
};
